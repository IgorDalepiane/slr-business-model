% ===========================================================================================
% Revenue Sources - Horizontal Bar Chart
% Revenue sources identified in the studies
% Total: 67 studies
% ===========================================================================================
\begin{tikzpicture}
\begin{axis}[
    xbar,
    bar width=6pt,
    legend cell align=left,
    legend style={
        legend columns=1,
        at={(1.02,0.5)},
        anchor=west,
        draw=none,
        font=\scriptsize
    },
    ytick=data,
    axis y line*=none,
    axis x line*=bottom,
    x tick label style={font=\scriptsize},
    y tick label style={font=\scriptsize},
    label style={font=\scriptsize},
    xlabel={Percentage of Studies (\%)},
    xtick={0,20,40,60,80},
    xmin=0,
    xmax=95,
    width=0.85\columnwidth,
    height=4.5cm,
    bar width=5mm,
    yticklabels={
        {Advertising},
        {Perpetual license},
        {Transaction},
        {Usage/consumption},
        {Subscription}
    },
    area legend,
    y=7mm,
    enlarge y limits={abs=0.5},
    nodes near coords,
    nodes near coords align=horizontal,
    every node near coord/.append style={
        black,
        font=\scriptsize,
        text opacity=1,
        fill=white,
        fill opacity=0.6,
        outer sep=\pgflinewidth
    },
    visualization depends on={\thisrow{n} \as \mycount},
    nodes near coords={\pgfmathprintnumber\pgfplotspointmeta\% (n=\pgfmathprintnumber[fixed,precision=0]{\mycount})}
]
\addplot[pattern color=hardblue, pattern=north east lines] table [x=perc, y=idx, meta=perc] {
perc idx n
19.4 1 13
16.4 2 11
32.8 3 22
41.8 4 28
76.1 5 51
};
\end{axis}
\end{tikzpicture}
